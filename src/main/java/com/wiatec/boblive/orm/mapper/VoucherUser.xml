<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wiatec.boblive.orm.dao.voucher.VoucherUserDao">
    <resultMap type="com.wiatec.boblive.orm.pojo.voucher.VoucherUserInfo" id="voucherUserInfo">
        <id column="id" property="id"/>
        <result column="mac" property="mac"/>
        <result column="voucher_id" property="voucherId"/>
        <result column="level" property="level"/>
        <result column="days" property="days"/>
        <result column="price" property="price"/>
        <result column="activate_time" property="activateTime"/>
        <result column="expires_time" property="expiresTime"/>
        <result column="create_time" property="createTime"/>
    </resultMap>

    <sql id="select">SELECT id, mac, voucher_id, level, days, price, activate_time, expires_time, create_time FROM voucher_user </sql>

    <select id="countOneByMac" resultType="java.lang.Integer" parameterType="com.wiatec.boblive.orm.pojo.voucher.VoucherUserInfo">
        SELECT COUNT(*) count FROM voucher_user WHERE mac=#{mac}
    </select>

    <insert id="insertOne" parameterType="com.wiatec.boblive.orm.pojo.voucher.VoucherUserInfo">
        INSERT INTO voucher_user
          (mac, voucher_id, days, price, activate_time, expires_time)
        VALUES (#{mac}, #{voucherId}, #{days}, #{price}, #{activateTime}, #{expiresTime})
    </insert>

    <update id="updateByMac" parameterType="com.wiatec.boblive.orm.pojo.voucher.VoucherUserInfo">
        UPDATE voucher_user SET
            voucher_id=#{voucherId}, days=#{days}, price=#{price},
            activate_time=#{activateTime}, expires_time=#{expiresTime}
        WHERE mac=#{mac}
    </update>

    <select id="selectOneByMac" parameterType="java.lang.String"
            resultMap="voucherUserInfo">
        <include refid="select"/>
        WHERE mac=#{_parameter}
    </select>

</mapper>